<!DOCTYPE html>
<html>
    <head>
        <title>Page title</title>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
        <script src="js/reconnecting-websocket.js"></script>
    </head>
    <body>
        <script>
            // New block found (25 BTC awarded)
            // Transfer of X BTC (a BTC + b BTC + c BTC)
            // Show error message when: 'onerror' fires

            var DATASOURCE = 'wss://ws.blockchain.info/inv';
            var CMD_SUBSCRIBE_BLOCKS = '{"op":"blocks_sub"}\n';
            var CMD_SUBSCRIBE_TX = '{"op":"unconfirmed_sub"}\n';

            var rws = new ReconnectingWebSocket(DATASOURCE);
            rws.onopen = function() {
                rws.send(CMD_SUBSCRIBE_BLOCKS);
                //rws.send(CMD_SUBSCRIBE_TX);
            };
            rws.onmessage = function(msg) {
                console.log(msg.data);
            };
        </script>
    </body>
</html>
